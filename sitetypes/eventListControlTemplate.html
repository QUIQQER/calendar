<section itemscope itemtype="{$this->getAttribute('itemtype')}"
         class="qui-control-childrenlist-default control-template">

    <link property="mainEntityOfPage" href="{url site=$Site}">

    {assign var=counter value=1}

    <div id="event-list">
        {foreach from=$children item=Child}
            {assign var=_Child value=$Child->load()}

            {assign var=Event value=\QUI\Calendar\EventManager::getEventById($Child->getAttribute('event.settings.id'))}

            {if $Event}
            <article itemscope
                     itemprop="itemListElement"
                     itemtype="{$this->getAttribute('child-itemtype')}"
                     class="qui-control-childrenlist-default-entry"
            >
                <meta itemprop="position" content="{$counter}"/>
                {assign var=counter value=$counter+1}

                {if $this->getAttribute('display') == 'simple'}
                    <div class="event event-style-simple">
                        <a itemprop="url" href="{url site=$Child}" title="{$Event->text}">
                            <div class="event-index"></div>
                            <div class="event-title">
                                {$Event->text}
                            </div>
                        </a>
                    </div>
                {/if}

                {if $this->getAttribute('display') == 'modern'}
                    <div class="event event-style-modern">
                        <a itemprop="url" href="{url site=$Child}" title="{$Event->text}">
                            <div class="event-header">
                                <div class="event-date">
                                    <div class="event-date-day">{$Event->start_date|date_format:"%d"}.</div>
                                    <div class="event-date-month">{$Event->start_date|date_format:"%B"}</div>
                                </div>

                                <div class="event-info">
                                    <div class="event-title">{$Event->text}</div>
                                    <div class="event-time">
                                        {$Event->start_date|date_format:"%d.%m.%Y, %H:%M"} â€“
                                        {$Event->end_date|date_format:"%d.%m.%Y, %H:%M"}
                                    </div>
                                    <div class="event-link">
                                        <i class="fa fa-external-link" aria-hidden="true"></i>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                {/if}
            </article>
            {/if}
        {/foreach}
    </div>
</section>

{if $this->getAttribute('showPagination') && $sheets > 1}
{$Pagination->create()}
{/if}
